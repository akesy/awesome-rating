$.fn.awesomeRating=function(a){a=a||{};var b={values:[1,2,3,4,5],valueInitial:null,cssBase:"rating-star fa",cssBaseSelected:"fa-star",cssBaseUnselected:"fa-star-o",cssValuesSelected:["first-selected","second-selected","third-selected","forth-selected","fifth-selected"],cssValuesUnselected:["first-unselected","second-unselected","third-unselected","forth-unselected","fifth-unselected"],cssHover:"rating-star-hover",cssFractional:"rating-star-fractional",targetSelector:null,htmlBase:"<div></div>",htmlEvent:"click",applyHoverCss:!0,readonly:!1,allowFractional:!1,calculateFractional:null,eventName:"rated"};return this.each(function(){if(!this._awesomeRatingApi){var c=$(this),d={values:{list:a.values||b.values||[],initial:a.valueInitial||b.valueInitial||null,current:null},html:{base:a.htmlBase||b.htmlBase,event:a.htmlEvent||b.htmlEvent},css:{base:a.cssBase||b.cssBase,selected:a.cssBaseSelected||b.cssBaseSelected,unselected:a.cssBaseUnselected||b.cssBaseUnselected,values:{selected:a.cssValuesSelected||b.cssValuesSelected||[],unselected:a.cssValuesUnselected||b.cssValuesUnselected||[]},hover:a.cssHover||b.cssHover||null,fractional:a.cssFractional||b.cssFractional||null},settings:{applyHoverCss:a.applyHoverCss!==!1&&b.applyHoverCss,readonly:a.readonly||b.readonly||!1,allowFractional:a.allowFractional||b.allowFractional||!1,eventName:a.eventName||b.eventName||"rated"},external:{$:{element:c,target:$(a.targetSelector||b.targetSelector),rates:null,fractional:null},val:function(a){return void 0===a?d.values.current:void d.storeValue(a)}},temp:{$initial:null},storeValue:function(a){a!==d.values.current&&(d.values.current=a,d.external.$.target&&d.external.$.target.text(a)&&d.external.$.target.val(a),d.triggerEvent(),d.updateCss())},triggerEvent:function(){d.external.$.element.trigger(d.settings.eventName,[d.values.current])},updateCss:function(){var a=!1||null==d.values.current,b=-1;d.external.$.rates.each(function(c){var e=$(this);if(!a&&d.settings.allowFractional){var f=d.settings.allowFractional?d.calculateFractional(c):-1,g=f>0&&1>f;a=g,a&&(b=c)}e.toggleClass(d.css.selected,!a),e.toggleClass(d.css.unselected,a),d.css.values.selected.length==d.values.list.length&&d.css.values.unselected.length==d.values.list.length&&$.each(d.values.list,function(b,c){var f=d.settings.allowFractional?d.calculateFractional(b):-1,g=f>0&&1>f;e.toggleClass(d.css.values.selected[b],!a&&(c===d.values.current||g)),e.toggleClass(d.css.values.unselected[b],a&&(c===d.values.current||g))}),d.values.list[c]===d.values.current&&(a=!0)}),d.settings.allowFractional&&d.external.$.fractional.each(function(a){var c=$(this);if(a!==b)c.hide();else{var e=d.calculateFractional(a);c.css("display","initial"),c.width(e+"em")}})},updateCssHover:function(a){d.external.$.rates.each(function(b){$(this).toggleClass(d.css.hover,a>=b)}),d.settings.allowFractional&&d.external.$.fractional.each(function(b){$(this).toggleClass(d.css.hover,a>=b)})},calculateFractional:a.calculateFractional||b.calculateFractional||function(a){return d.values.current-d.values.list[a]}};$.each(d.values.list,function(a,b){var c=d.external.$.element.append(d.html.base).find(":last-child");c.toggleClass(d.css.base,!0),c.toggleClass(d.css.unselected,!0),b===d.values.initial&&(d.values.current=b),d.settings.readonly||(c.on(d.html.event,function(){d.storeValue(b)}),d.settings.applyHoverCss&&c.hover(function(){d.updateCssHover(a)},function(){d.updateCssHover(-1)}))}),d.external.$.rates=d.external.$.element.children(),d.settings.allowFractional&&d.external.$.rates.each(function(a){var b=$(this).before(d.html.base).prev();b.toggleClass(d.css.base,!0),b.toggleClass(d.css.fractional,!0),b.toggleClass(d.css.selected,!0),d.css.values.selected.length==d.values.list.length&&d.css.values.unselected.length==d.values.list.length&&b.toggleClass(d.css.values.selected[a]),d.settings.readonly||(b.on(d.html.event,function(){d.storeValue(d.values.list[a])}),d.settings.applyHoverCss&&b.hover(function(){d.updateCssHover(a)},function(){d.updateCssHover(-1)}))}),d.external.$.fractional=d.external.$.element.find("."+d.css.fractional),d.updateCss(),this._awesomeRatingApi=d.external}})};