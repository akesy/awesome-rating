$.fn.awesomeRating=function(a){a=a||{};var b={values:[1,2,3,4,5],valueInitial:null,cssBase:"rating-star fa",cssBaseSelected:"fa-star",cssBaseUnselected:"fa-star-o",cssValuesSelected:["first-selected","second-selected","third-selected","forth-selected","fifth-selected"],cssValuesUnelected:["first-unselected","second-unselected","third-unselected","forth-unselected","fifth-unselected"],targetSelector:null,htmlBase:"<i></i>",htmlSelector:":last-child",htmlEvent:"click"},c={values:{list:a.values||b.values||[],initial:a.valueInitial||b.valueInitial||null,current:null},html:{base:a.htmlBase||b.htmlBase,selector:a.htmlSelector||b.htmlSelector,event:a.htmlEvent||b.htmlEvent},css:{base:a.cssBase||b.cssBase,selected:a.cssBaseSelected||b.cssBaseSelected,unselected:a.cssBaseUnselected||b.cssBaseUnselected,values:{selected:a.cssValuesSelected||b.cssValuesSelected||[],unselected:a.cssValuesUnelected||b.cssValuesUnelected||[]}},external:{$:{element:this,target:$(a.targetSelector||b.targetSelector),rates:null},val:function(a){return void 0===a?c.values.current:(c.storeValue(a),void c.updateCss())}},temp:{$initial:null},storeValue:function(a){c.values.current=a,c.external.$.target&&this.external.$.target.val(a)},updateCss:function(){var a=!1||null==c.values.current;c.external.$.rates.each(function(b){var d=$(this);d.toggleClass(c.css.selected,!a),d.toggleClass(c.css.unselected,a),$.each(c.values.list,function(b,e){d.toggleClass(c.css.values.selected[b],!a&&e===c.values.current),d.toggleClass(c.css.values.unselected[b],a&&e===c.values.current)}),c.values.list[b]===c.values.current&&(a=!0)})}};return $.each(c.values.list,function(a,b){var d=c.external.$.element.append(c.html.base).find(c.html.selector);d.toggleClass(c.css.base,!0),d.toggleClass(c.css.unselected,!0),d.on(c.html.event,function(){b!=c.values.current&&(c.storeValue(b),c.updateCss(d),c.external.$.element.trigger("rated",[c.values.current]))}),b==c.values.initial&&(c.temp.$initial=d)}),c.external.$.rates=c.external.$.element.children(),c.temp.$initial&&c.temp.$initial.trigger(c.html.event),this.awesomeRating=c.external,this},angular.module("awesome-rating",[]).directive("awesomeRating",function(){return{restrict:"A",scope:{awesomeRating:"=",awesomeRatingOptions:"@"},link:function(a,b){var c=a.awesomeRatingOptions&&JSON.parse(a.awesomeRatingOptions)||{};c.valueInitial=a.awesomeRating,$element=$(b).awesomeRating(c).on("rated",function(b,c){a.$apply(function(){a.awesomeRating=c})}),a.$watch("awesomeRating",function(a){$element.awesomeRating.val(a)})}}});